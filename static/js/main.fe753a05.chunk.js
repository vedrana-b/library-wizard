(this["webpackJsonplibrary-wizard-test"]=this["webpackJsonplibrary-wizard-test"]||[]).push([[0],[,,,,,,function(e,t,a){e.exports=a.p+"static/media/success.8b4d6e74.svg"},,function(e){e.exports=JSON.parse('{"genres":[{"id":1,"name":"Genre 1","subgenres":[{"id":10,"name":"Subgenre 1","isDescriptionRequired":true},{"id":11,"name":"Subgenre 2","isDescriptionRequired":false},{"id":12,"name":"Subgenre 3","isDescriptionRequired":true},{"id":13,"name":"Subgenre 4","isDescriptionRequired":true},{"id":14,"name":"Subgenre 5","isDescriptionRequired":true}]},{"id":2,"name":"Genre 2","subgenres":[{"id":15,"name":"Subgenre 1","isDescriptionRequired":true},{"id":16,"name":"Subgenre 2","isDescriptionRequired":false},{"id":17,"name":"Subgenre 3","isDescriptionRequired":true}]},{"id":3,"name":"Genre 3","subgenres":[{"id":18,"name":"Subgenre 1","isDescriptionRequired":true},{"id":19,"name":"Subgenre 2","isDescriptionRequired":true},{"id":20,"name":"Subgenre 3","isDescriptionRequired":true}]},{"id":4,"name":"Genre 4","subgenres":[{"id":21,"name":"Subgenre 1","isDescriptionRequired":false},{"id":22,"name":"Subgenre 2","isDescriptionRequired":false},{"id":23,"name":"Subgenre 3","isDescriptionRequired":false}]},{"id":5,"name":"Genre 5","subgenres":[{"id":24,"name":"Subgenre 1","isDescriptionRequired":true}]}]}')},function(e,t,a){e.exports=a(19)},,,,,,function(e,t,a){},function(e,t,a){},,,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(5),c=a.n(o),s=(a(14),a(15),a(16),a(1)),i=a(3),l=function(e){var t=e.flow,a=e.step;return r.a.createElement("div",{className:"grid-x steps"},t.map((function(e,t){return r.a.createElement("div",{key:t,className:"step"},r.a.createElement("div",{className:a===Number(e.step||t+1)?"step__counter active":"step__counter"},e.step||t+1),r.a.createElement("div",{className:"step__text"},r.a.createElement("h6",null,e.label)))})))},u=a(2),m=a.n(u),b=function(e){var t=e.genres,a=e.onNextStep,o=e.onAddGenre,c=e.selectedGenre,s=Object(n.useState)(c),l=Object(i.a)(s,2),u=l[0],b=l[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"grid-x genres"},t.map((function(e){return r.a.createElement("button",{onClick:function(){return function(e){b(e)}(e)},key:e.id,id:e.id,className:e===u?"button button__genre active":"button button__genre"},e.name)}))),r.a.createElement("div",{className:"grid-x buttons"},r.a.createElement("button",{onClick:function(){m.a.object({id:m.a.number().required(),name:m.a.string().required(),subgenres:m.a.array().optional()}).validate(u).error||(o(u),a())},className:"button button__control button__control--next"},"Next")))},d=function(e){var t=e.subgenres,a=e.onNextStep,o=e.onAddSubgenre,c=e.onAddNewSubgenre,s=e.onBackStep,l=e.selectedSubgenre,u=e.newSubgenre,b=Object(n.useState)(l),d=Object(i.a)(b,2),g=d[0],p=d[1],_=Object(n.useState)(u),f=Object(i.a)(_,2),E=f[0],v=f[1],N=function(){return m.a.object({id:m.a.number().required(),name:m.a.string().required(),isDescriptionRequired:m.a.boolean().optional()}).validate(g)},k=function(){return m.a.boolean().valid(!0).required().validate(E)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"grid-x genres"},t.map((function(e){return r.a.createElement("button",{key:e.id,onClick:function(){return function(e){v(!1),p(e)}(e)},className:e===g?"button button__genre active":"button button__genre"},e.name)})),r.a.createElement("button",{onClick:function(){v(!0),p({})},className:E?"button button__genre active":"button button__genre"},"Add new")),r.a.createElement("div",{className:"grid-x buttons"},r.a.createElement("button",{onClick:function(){s()},className:"button button__control button__control--back"},r.a.createElement("i",{className:"fa fa-angle-left button__icon"}),"Back"),r.a.createElement("button",{onClick:function(){!N().error!==!k().error&&(o(g),c(E),a())},className:"button button__control button__control--next"},"Next")))},g=function(e){var t=e.onAddBook,a=e.onBackStep,o=e.isDescriptionRequired,c=Object(n.useState)([]),l=Object(i.a)(c,2),u=l[0],b=l[1],d=Object(n.useState)({title:"",author:"",publisher:"",isbn:"",date:"",numOfPages:"",format:"",desc:"",edition:"",editionLang:""}),g=Object(i.a)(d,2),p=g[0],_=g[1],f=function(){return m.a.object({title:m.a.string().required().error(v("Title")),author:m.a.string().required().error(v("Author")),publisher:m.a.string().required().error(v("Publisher")),isbn:m.a.string().required().error(v("Isbn")),date:m.a.date().required().error(v("Date")),numOfPages:m.a.number().required().min(1).error(v("Number of pages")),format:m.a.string().required().error(v("Format")),edition:m.a.string().required().error(v("Edition")),editionLang:m.a.string().required().error(v("Edition Language")),desc:o?m.a.string().required().error(v("Description")):m.a.string().allow("").optional()}).options({abortEarly:!1}).validate(p)},E=function(e){return u&&u.find((function(t){return t.path.includes(e)}))},v=function(e){return function(t){return t.forEach((function(t){switch(t.type){case"any.required":t.message="".concat(e," is required field");break;case"string.base":t.message="".concat(e," should be a type of 'text'");break;case"any.empty":t.message="".concat(e," should not be empty");break;case"number.base":t.message="".concat(e," should be a type 'integer'");break;case"number.min":t.message="".concat(e," should be greater than ").concat(t.context.min,"'");break;case"date.base":t.message="".concat(e," should be a type of date")}})),t}};return r.a.createElement("div",{className:"book"},r.a.createElement("div",{className:"grid-x"},r.a.createElement("label",{className:"book__label"},"Book title",r.a.createElement("input",{value:p.title,onChange:function(e){var t=e.target;return _(Object(s.a)(Object(s.a)({},p),{},{title:t.value}))},className:"book__input",placeholder:"Book title"}),E("title")&&r.a.createElement("p",{className:"error__msg"},E("title").message))),r.a.createElement("div",{className:"grid-x"},r.a.createElement("label",{className:"book__label"},"Author",r.a.createElement("select",{className:"book__input",value:p.author,onChange:function(e){var t=e.target;return _(Object(s.a)(Object(s.a)({},p),{},{author:t.value}))}},r.a.createElement("option",{value:"",disabled:!0,defaultValue:!0},"Author"),r.a.createElement("option",{value:"Jane Austen"},"Jane Austen"),r.a.createElement("option",{value:"William Faulkner"},"William Faulkner")),E("author")&&r.a.createElement("p",{className:"error__msg"},E("author").message))),r.a.createElement("div",{className:"grid-x"},r.a.createElement("label",{className:"book__label"},"ISBN",r.a.createElement("input",{value:p.isbn,onChange:function(e){var t=e.target;return _(Object(s.a)(Object(s.a)({},p),{},{isbn:t.value}))},className:"book__input",placeholder:"ISBN"}),E("isbn")&&r.a.createElement("p",{className:"error__msg"},E("isbn").message))),r.a.createElement("div",{className:"grid-x"},r.a.createElement("label",{className:"book__label"},"Publisher",r.a.createElement("select",{value:p.publisher,onChange:function(e){var t=e.target;return _(Object(s.a)(Object(s.a)({},p),{},{publisher:t.value}))},className:"book__input"},r.a.createElement("option",{value:"",disabled:!0,defaultValue:!0},"Publisher"),r.a.createElement("option",{value:"Jane Austen"},"Jane Austen"),r.a.createElement("option",{value:"William Faulkner"},"William Faulkner")),E("publisher")&&r.a.createElement("p",{className:"error__msg"},E("publisher").message))),r.a.createElement("div",{className:"grid-x"},r.a.createElement("label",{value:p.date,onChange:function(e){var t=e.target;return _(Object(s.a)(Object(s.a)({},p),{},{date:t.value}))},className:"book__label"},"Data published",r.a.createElement("input",{type:"date",className:"book__input book__input--md"}),E("date")&&r.a.createElement("p",{className:"error__msg"},E("date").message))),r.a.createElement("div",{className:"grid-x"},r.a.createElement("label",{className:"book__label"},"Number of pages",r.a.createElement("input",{value:p.numOfPages,onChange:function(e){var t=e.target;return _(Object(s.a)(Object(s.a)({},p),{},{numOfPages:t.value}))},className:"book__input book__input--sm",placeholder:"Number of pages"}),E("numOfPages")&&r.a.createElement("p",{className:"error__msg"},E("numOfPages").message))),r.a.createElement("div",{className:"grid-x"},r.a.createElement("label",{className:"book__label"},"Format",r.a.createElement("select",{value:p.format,onChange:function(e){var t=e.target;return _(Object(s.a)(Object(s.a)({},p),{},{format:t.value}))},className:"book__input book__input--md"},r.a.createElement("option",{value:"",disabled:!0,defaultValue:!0},"Format"),r.a.createElement("option",{value:"format 1"},"Format 1"),r.a.createElement("option",{value:"format 2"},"Format 2")),E("format")&&r.a.createElement("p",{className:"error__msg"},E("format").message))),r.a.createElement("div",{className:"grid-x"},r.a.createElement("label",{className:"book__label book__label--sm"},"Edition",r.a.createElement("input",{value:p.edition,onChange:function(e){var t=e.target;return _(Object(s.a)(Object(s.a)({},p),{},{edition:t.value}))},className:"book__input book__input--md",placeholder:"Edition"}),E("edition")&&r.a.createElement("p",{className:"error__msg"},E("edition").message)),r.a.createElement("label",{className:"book__label"},"Edition language",r.a.createElement("select",{value:p.editionLang,onChange:function(e){var t=e.target;return _(Object(s.a)(Object(s.a)({},p),{},{editionLang:t.value}))},className:"book__input book__input--md"},r.a.createElement("option",{value:"",disabled:!0,defaultValue:!0},"Edition language"),r.a.createElement("option",{value:"format 1"},"Format 1"),r.a.createElement("option",{value:"format 2"},"Format 2")),E("editionLang")&&r.a.createElement("p",{className:"error__msg"},E("editionLang").message))),r.a.createElement("div",{className:"grid-x"},r.a.createElement("label",{className:"book__label"},"Description",r.a.createElement("textarea",{value:p.desc,onChange:function(e){var t=e.target;return _(Object(s.a)(Object(s.a)({},p),{},{desc:t.value}))},className:"book__textarea",placeholder:"Type the description..."}),E("desc")&&r.a.createElement("p",{className:"error__msg"},E("desc").message))),r.a.createElement("div",{className:"grid-x buttons"},r.a.createElement("button",{onClick:function(){a()},className:"button button__control button__control--back"},r.a.createElement("i",{className:"fa fa-angle-left button__icon"}),"Back"),r.a.createElement("button",{onClick:function(){b([]);var e=f();e.error?b(e.error.details):t(p)},className:"button button__control button__control--next"},"Add")))},p=function(e){var t=e.onAddNewSubgenre,a=e.onNextStep,o=e.onBackStep,c=Object(n.useState)(!1),s=Object(i.a)(c,2),l=s[0],u=s[1],b=Object(n.useState)(""),d=Object(i.a)(b,2),g=d[0],p=d[1],_=Object(n.useState)([]),f=Object(i.a)(_,2),E=f[0],v=f[1],N=function(){var e={description:l,name:g};return m.a.object({description:m.a.boolean(),name:m.a.string().required().error((function(e){return e.forEach((function(e){switch(e.type){case"any.required":e.message="Bookname is a required field";break;case"string.base":e.message="Bookname should be a type of 'text'";break;case"any.empty":e.message="Bookname cannot be an empty field"}})),e}))}).validate(e)},k=function(e){return E&&E.find((function(t){return t.path.includes(e)}))};return r.a.createElement("div",{className:"book"},r.a.createElement("div",{className:"grid-x error"},r.a.createElement("label",{className:"book__subgenre"},r.a.createElement("input",{value:g,onChange:function(e){var t=e.target;p(t.value)},className:"book__input",placeholder:"Subgenre name"})),k("name")&&r.a.createElement("p",{className:"error__msg"},k("name").message)),r.a.createElement("div",{className:"grid-x book__new-subgenre"},r.a.createElement("input",{onChange:function(){u(!l)},type:"checkbox"}),r.a.createElement("p",{className:"book__new-subgenre--desc"},"Description is required for this subgenre")),r.a.createElement("div",{className:"grid-x buttons"},r.a.createElement("button",{onClick:function(){o()},className:"button button__control button__control--back"},r.a.createElement("i",{className:"fa fa-angle-left button__icon"}),"Back"),r.a.createElement("button",{onClick:function(){var e=N();e.error?v(e.error.details):(t(l,g),a())},className:"button button__control button__control--next"},"Next")))},_=a(6),f=a.n(_),E=function(e){var t=e.onRestart;return r.a.createElement("div",{className:"success-page"},r.a.createElement("img",{className:"success-page__logo",src:f.a}),r.a.createElement("div",{className:"success-page__text"},r.a.createElement("p",null,"Book added successfully")),r.a.createElement("div",{className:"success-page__btn"},r.a.createElement("button",{onClick:t,className:"button button__success button__control--next"},"Add another book")))},v=a(7),N=a.n(v),k=a(8);var h=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)({genre:{},subgenre:{},information:{}}),u=Object(i.a)(c,2),m=u[0],_=u[1],f=Object(n.useState)(),v=Object(i.a)(f,2),h=v[0],S=v[1],O=Object(n.useState)(1),j=Object(i.a)(O,2),x=j[0],q=j[1],w=Object(n.useState)(),y=Object(i.a)(w,2),D=y[0],C=y[1];Object(n.useEffect)((function(){new Promise((function(e,t){e(k)})).then((function(e){o(e.genres)}))}));var A=function(e){_(Object(s.a)(Object(s.a)({},m),{},{genre:e}))},R=function(e){_(Object(s.a)(Object(s.a)({},m),{},{subgenre:e}))},B=function(){q(x+1)},F=function(){q(x-1)},P=function(e){S(e)},G=function(e,t){_(Object(s.a)(Object(s.a)({},m),{},{subgenre:{name:t,isDescriptionRequired:e}}))},J=function(e){var t=Object(s.a)(Object(s.a)({},m),{},{information:e});_(t),function(e){return new Promise((function(t,a){console.log("POST /book: ",e),t({status:201})}))}(t).then((function(e){201===e.status&&C(!0)}))},L=function(){var e={genreStep:{label:"Genre",component:r.a.createElement(b,{selectedGenre:m.genre,genres:a,onAddGenre:A,onNextStep:B})},subgenreStep:{label:"Subgenre",component:r.a.createElement(d,{onNextStep:B,onBackStep:F,onAddSubgenre:R,subgenres:m.genre.subgenres,onAddNewSubgenre:P,selectedSubgenre:m.subgenre,newSubgenre:h})},addNewSubgenreStep:{label:"Add new subgenre",component:r.a.createElement(p,{onAddNewSubgenre:G,onNextStep:B,onBackStep:F})},informationStep:{label:"Information",component:r.a.createElement(g,{onBackStep:F,onAddBook:J,isDescriptionRequired:m.subgenre.isDescriptionRequired})},placeholderStep:{label:"",step:"...",component:null}},t=e.genreStep,n=e.subgenreStep,o=e.informationStep,c=[t,n,e.placeholderStep],s=[t,n,o],i=[t,n,e.addNewSubgenreStep,o];return N.a.isEmpty(m.subgenre)&&void 0===h?c:h?i:s};return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"grid-container lib"},D?r.a.createElement(E,{onRestart:function(){q(1),_({genre:{},subgenre:{}}),S(),C()}}):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"grid-x lib__title"},r.a.createElement("h5",null,"Add book - New book")),r.a.createElement(l,{step:x,flow:L()}),function(e){return L()[e-1].component}(x))))};var S=function(){return r.a.createElement("div",null,r.a.createElement(h,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[9,1,2]]]);
//# sourceMappingURL=main.fe753a05.chunk.js.map